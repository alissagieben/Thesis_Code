#A parser used to clean up the data generated by the experiment even further

import re

if __name__ == "__main__":

    #It will keep track of what communication was used, and what the final scores of the played games is.    
    human_reserve_intensity = [0, 0, 0, 0]
    agent_reserve_intensity = [0, 0, 0, 0]
    human_reserve = 0
    human_ruin = 0
    agent_ruin = 0
    agent_reserve = 0
    final_score = 0

    #Read the file
    with open('simple_output.txt') as f:
        lines = f.readlines() # list containing lines of file

        #Each line is processed, and values are added wherever applicable.
        for line in lines:
            x = re.split(': |, ', line)
            if x[0] == 'reserve':
                human_reserve += 1
                human_reserve_intensity[int(x[2]) - 1] += 1
            if x[0] == 'ruin':
                human_ruin += 1
            if x[0] == 'AGENT':
                if x[1] == 'There will be a big jump on pile':
                    agent_ruin += 1
                else:
                    agent_reserve += 1
                    if x[1].startswith('It') == True:
                        agent_reserve_intensity[0] += 1
                    if x[1].startswith('Please') == True:
                        agent_reserve_intensity[1] += 1
                    if x[1].startswith('You') == True:
                        agent_reserve_intensity[2] += 1
                    if x[1].startswith('If') == True:
                        agent_reserve_intensity[3] += 1
            if x[0] == 'The final score is':
                final_score = int(x[1])

        #A new output file with the cleaned up data is generated
        print('Human reserve:',human_reserve , file=open('output.txt', 'a'))
        print('Human reserve tone 1:',human_reserve_intensity[0] , file=open('output.txt', 'a'))
        print('Human reserve tone 2:',human_reserve_intensity[1] , file=open('output.txt', 'a'))
        print('Human reserve tone 3:',human_reserve_intensity[2] , file=open('output.txt', 'a'))
        print('Human reserve tone 4:',human_reserve_intensity[3] , file=open('output.txt', 'a'))
        print('Human ruin:',human_ruin , file=open('output.txt', 'a'))
        print('Agent reserve:',agent_reserve , file=open('output.txt', 'a'))
        print('Agent reserve tone 1:',agent_reserve_intensity[0] , file=open('output.txt', 'a'))
        print('Agent reserve tone 2:',agent_reserve_intensity[1] , file=open('output.txt', 'a'))
        print('Agent reserve tone 3:',agent_reserve_intensity[2] , file=open('output.txt', 'a'))
        print('Agent reserve tone 4:',agent_reserve_intensity[3] , file=open('output.txt', 'a'))
        print('Agent ruin:',agent_ruin , file=open('output.txt', 'a'))
        print('Final score:',final_score , file=open('output.txt', 'a'))





    

                


        
        
